<h1>mapbox-gl-style-spec/lib/validate_style.min</h1>
<pre><code class="lang-js"><span class="string">'use strict'</span>;

<span class="keyword">var</span> validateConstants = require(<span class="string">'./validate/validate_constants'</span>);
<span class="keyword">var</span> validate = require(<span class="string">'./validate/validate'</span>);
<span class="keyword">var</span> latestStyleSpec = require(<span class="string">'../reference/latest.min'</span>);
<span class="keyword">var</span> validateGlyphsURL = require(<span class="string">'./validate/validate_glyphs_url'</span>);

<span class="comment">/**
 * Validate a Mapbox GL style against the style specification. This entrypoint,
 * `mapbox-gl-style-spec/lib/validate_style.min`, is designed to produce as
 * small a browserify bundle as possible by omitting unnecessary functionality
 * and legacy style specifications.
 *
 * @param {Object} style The style to be validated.
 * @param {Object} [styleSpec] The style specification to validate against.
 *     If omitted, the latest style spec is used.
 * @returns {Array&lt;ValidationError>}
 * @example
 *   var validate = require('mapbox-gl-style-spec/lib/validate_style.min');
 *   var errors = validate(style);
 */</span>
<span class="function"><span class="keyword">function</span> <span class="title">validateStyleMin</span><span class="params">(style, styleSpec)</span> {</span>
    styleSpec = styleSpec || latestStyleSpec;

    <span class="keyword">var</span> errors = [];

    errors = errors.concat(validate({
        key: <span class="string">''</span>,
        value: style,
        valueSpec: styleSpec.$root,
        styleSpec: styleSpec,
        style: style,
        objectElementValidators: {
            glyphs: validateGlyphsURL
        }
    }));

    <span class="keyword">if</span> (styleSpec.$version > <span class="number">7</span> &amp;&amp; style.constants) {
        errors = errors.concat(validateConstants({
            key: <span class="string">'constants'</span>,
            value: style.constants,
            style: style,
            styleSpec: styleSpec
        }));
    }

    <span class="keyword">return</span> sortErrors(errors);
}

validateStyleMin.source = wrapCleanErrors(require(<span class="string">'./validate/validate_source'</span>));
validateStyleMin.layer = wrapCleanErrors(require(<span class="string">'./validate/validate_layer'</span>));
validateStyleMin.filter = wrapCleanErrors(require(<span class="string">'./validate/validate_filter'</span>));
validateStyleMin.paintProperty = wrapCleanErrors(require(<span class="string">'./validate/validate_paint_property'</span>));
validateStyleMin.layoutProperty = wrapCleanErrors(require(<span class="string">'./validate/validate_layout_property'</span>));

<span class="function"><span class="keyword">function</span> <span class="title">sortErrors</span><span class="params">(errors)</span> {</span>
    <span class="keyword">return</span> [].concat(errors).sort(<span class="function"><span class="keyword">function</span> <span class="params">(a, b)</span> {</span>
        <span class="keyword">return</span> a.line - b.line;
    });
}

<span class="function"><span class="keyword">function</span> <span class="title">wrapCleanErrors</span><span class="params">(inner)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>() {
        <span class="keyword">return</span> sortErrors(inner.apply(<span class="keyword">this</span>, arguments));
    };
}

module.exports = validateStyleMin;
</code></pre>